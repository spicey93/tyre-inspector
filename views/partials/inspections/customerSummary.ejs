<h3 class="text-base font-semibold text-slate-900">Customer summary</h3>
<p class="mt-1 text-sm text-slate-700"><%= overallHeadline %></p>

<% if (needsAttention.length) { %>
  <div class="mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3">
    <% for (const a of needsAttention) { %>
      <div class="rounded-xl border border-slate-200 p-3">
        <div class="flex items-center justify-between">
          <div class="font-medium text-slate-900"><%= a.pos %></div>
          <span class="text-[11px] capitalize px-2 py-0.5 rounded-full border
            <%= a.cond==='advisory'?'bg-amber-200 text-amber-900 border-amber-700':
                a.cond==='fail'?'bg-rose-200 text-rose-900 border-rose-700':'bg-slate-100 text-slate-800 border-slate-400' %>"><%= a.cond %></span>
        </div>

        <ul class="mt-2 text-sm list-disc pl-5 space-y-1">
          <% (a.reasons.length ? a.reasons : ["Issue noted."]).forEach(r => { %>
            <li class="text-slate-700"><%= r %></li>
          <% }) %>
        </ul>

        <% if (a.actions.length) { %>
          <div class="mt-2">
            <div class="text-xs font-semibold text-slate-900">Recommended actions</div>
            <ul class="mt-1 text-sm list-disc pl-5 space-y-1">
              <% a.actions.forEach(act => { %><li class="text-slate-700"><%= act %></li><% }) %>
            </ul>
          </div>
        <% } %>

        <% if (typeof a.minDepth === 'number') { %>
          <div class="mt-2 text-xs text-slate-600">Minimum measured tread: <%= a.minDepth.toFixed(1) %> mm</div>
        <% } %>

        <% if (a.replace) { %>
          <div class="mt-2 text-sm font-medium text-rose-700">⚠ Replace this tyre now.</div>
        <% } else if (a.plan) { %>
          <div class="mt-2 text-sm font-medium text-amber-700">△ Plan replacement soon.</div>
        <% } %>
      </div>
    <% } %>
  </div>
<% } else { %>
  <p class="mt-3 text-sm text-slate-600">No follow-ups needed.</p>
<% } %>
