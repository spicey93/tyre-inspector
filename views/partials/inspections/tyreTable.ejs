<div class="mt-6 rounded-xl border border-slate-200 overflow-hidden">
  <!-- Mobile list -->
  <div class="md:hidden divide-y divide-slate-200">
    <% for (const row of tyresList) { %>
      <div class="p-4">
        <div class="flex items-start justify-between gap-3">
          <div class="font-semibold text-slate-900"><%= row.pos %></div>
          <span class="text-[11px] capitalize px-2 py-0.5 rounded-full border
            <%= row.cond==='ok'?'bg-emerald-200 text-emerald-800 border-emerald-600':
                row.cond==='advisory'?'bg-amber-200 text-amber-800 border-amber-600':
                row.cond==='fail'?'bg-rose-200 text-rose-800 border-rose-600':'bg-slate-100 text-slate-700 border-slate-300' %>"><%= row.cond %></span>
        </div>
        <dl class="mt-2 grid grid-cols-2 gap-x-3 gap-y-1.5 text-[13px]">
          <dt class="text-slate-500">Size</dt><dd class="text-right text-slate-900"><%= fmt(row.t.size) %></dd>
          <dt class="text-slate-500">Brand</dt><dd class="text-right text-slate-900"><%= fmt(row.t.brand) %></dd>
          <dt class="text-slate-500">Model</dt><dd class="text-right text-slate-900"><%= fmt(row.t.model) %></dd>
          <dt class="text-slate-500">DOT</dt><dd class="text-right text-slate-900"><%= fmt(row.t.dot) %></dd>
          <dt class="text-slate-500">Tread</dt><dd class="text-right text-slate-900"><%= row.treadStr %></dd>
        </dl>
        <% if ((Array.isArray(row.t?.tags) && row.t.tags.length) || row.t?.notes) { %>
          <div class="mt-2 space-y-1 text-xs">
            <% if (Array.isArray(row.t?.tags) && row.t.tags.length) { %>
              <div><strong>Tags:</strong> <%= row.t.tags.join(", ") %></div>
            <% } %>
            <% if (row.t?.notes) { %>
              <div><strong>Notes:</strong> <%= row.t.notes %></div>
            <% } %>
          </div>
        <% } %>
      </div>
    <% } %>
  </div>

  <!-- Desktop table -->
  <div class="hidden md:block">
    <div class="px-4 sm:px-5 py-3 border-b border-slate-200 bg-slate-50/60">
      <h3 class="text-sm font-semibold text-slate-900">Tyre details</h3>
    </div>
    <div class="table-scroll">
      <table class="min-w-[860px] w-full text-sm">
        <thead class="bg-slate-100 sticky top-0 z-10">
          <tr>
            <th class="text-left px-4 py-2">Position</th>
            <th class="text-left px-4 py-2">Size</th>
            <th class="text-left px-4 py-2">Brand</th>
            <th class="text-left px-4 py-2">Model</th>
            <th class="text-left px-4 py-2">DOT</th>
            <th class="text-left px-4 py-2">Tread (In / Mid / Out)</th>
            <th class="text-left px-4 py-2">Tags</th>
            <th class="text-left px-4 py-2">Condition</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-200">
          <% for (const row of tyresList) {
               const rowCls = row.cond==='ok' ? 'row-ok' : row.cond==='advisory' ? 'row-adv' : row.cond==='fail' ? 'row-fail' : '';
          %>
            <tr class="<%= rowCls %>">
              <td class="px-4 py-2 font-medium text-slate-900"><%= row.pos %></td>
              <td class="px-4 py-2"><%= fmt(row.t.size) %></td>
              <td class="px-4 py-2"><%= fmt(row.t.brand) %></td>
              <td class="px-4 py-2"><%= fmt(row.t.model) %></td>
              <td class="px-4 py-2"><%= fmt(row.t.dot) %></td>
              <td class="px-4 py-2"><%= row.treadStr %></td>
              <td class="px-4 py-2"><%= row.tagStr %></td>
              <td class="px-4 py-2">
                <span class="inline-flex items-center text-xs capitalize px-2 py-0.5 rounded-full border
                  <%= row.cond==='ok'?'bg-emerald-200 text-emerald-900 border-emerald-700':
                      row.cond==='advisory'?'bg-amber-200 text-amber-900 border-amber-700':
                      row.cond==='fail'?'bg-rose-200 text-rose-900 border-rose-700':'bg-slate-100 text-slate-800 border-slate-400' %>"><%= row.cond %></span>
              </td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>
